{"updatedAt":"2025-12-11T08:04:24.251Z","createdAt":"2025-11-04T05:36:44.135Z","id":"y2O53ZDruHZmodMs","name":"Progressive update","active":false,"isArchived":false,"nodes":[{"parameters":{"model":"openai/gpt-4o-mini","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-704,640],"id":"5ef58b87-44f9-41fb-97e6-da876e165b42","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"4o8miL0qoBa3RbWC","name":"OpenRouter account"}}},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1-_p6gAmthMENLViT4sxvH0oC2qtSojMWBgnuH9PRelI","mode":"id"},"sheetName":{"__rl":true,"value":"563410932","mode":"id"},"columns":{"mappingMode":"defineBelow","value":{"List":"={{ $json.output }}","Customer":"={{ $('Restructure Agent output').item.json.company_name }}"},"matchingColumns":["‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô"],"schema":[{"id":"date","displayName":"date","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"List","displayName":"List","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"Customer","displayName":"Customer","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[16,384],"id":"fc3986ff-ecf4-46f1-a03d-3050403888da","name":"Add data to the last row(s) in Project Ticket","credentials":{"googleSheetsOAuth2Api":{"id":"c6lhcKARMVFtPQPa","name":"Google Sheets account"}}},{"parameters":{"jsCode":"// ‡∏™‡∏£‡πâ‡∏≤‡∏á Date object ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô\nconst currentDate = new Date();\n\n// ‡∏î‡∏∂‡∏á‡∏ß‡∏±‡∏ô (dd) - ‡πÄ‡∏û‡∏¥‡πà‡∏° 0 ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡∏Ç‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß\nconst day = String(currentDate.getDate()).padStart(2, '0');\n\n// ‡∏î‡∏∂‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (mm) - ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô JavaScript ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 0 (‡∏°.‡∏Ñ. = 0)\n// ‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏ß‡∏Å 1 ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏° 0 ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏•‡∏Ç‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß\nconst month = String(currentDate.getMonth() + 1).padStart(2, '0');\n\n// ‡∏î‡∏∂‡∏á‡∏õ‡∏µ (yyyy)\nconst year = currentDate.getFullYear();\n\n// ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô string ‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö dd/mm/yyyy\nconst formattedDate = `${month}/${day}/${year}`;\n\n// ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà n8n ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô field ‡∏ä‡∏∑‡πà‡∏≠ 'current_date')\nreturn [\n  {\n      current_date: formattedDate\n  }\n];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-528,384],"id":"b0445566-2166-4dfb-80bb-2fd6c41368f5","name":"Get Current date1"},{"parameters":{"promptType":"define","text":"={{ $('When Executed by Another Workflow').item.json.message.text }}","options":{"systemMessage":"=üßæ Who you are and your role\nYou are an intelligent and precise AI Agent, primarily responsible for classifying user intentions and extracting specific necessary information for use in automated workflows.\n\nüéØ Your Mission and Output Format\nYour mission is to analyze incoming messages and categorize them based on user intent, while also extracting the \"task name\"\n\nYou must return the output as a single JSON Object only, with the following structure:\n\n{\n  \"task_name\": \"string | null\",\n}\n\nüß† Rules and Key Considerations\nOutput must be a JSON Object only. No other text or explanations are allowed outside the JSON.\n\n\ntask_name Extraction: Extract only the descriptive part of the task, excluding any leading command words or phrases like \"add task\", \"save task\", \"create task\", \"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô\", \"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô\", \"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô\". If the user does not specify a task name, set the value to null."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[-1104,384],"id":"b6babab9-8835-465f-a353-52407fd68fa5","name":"AI Agent1"},{"parameters":{"jsCode":"// ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Node ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤\n// ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ JSON string ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô field ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ 'output'\n// ‡∏´‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ field ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 'output' ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠ field ‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏°‡∏≤\nconst inputString = $input.first().json.output;\n\n// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß\nlet parsedJsonData = null;\n\n// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ inputString ‡πÄ‡∏õ‡πá‡∏ô string ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤\nif (typeof inputString === 'string' && inputString.trim() !== '') {\n  try {\n    // ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ JSON.parse() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á string ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô JSON Object\n    parsedJsonData = JSON.parse(inputString);\n  } catch (error) {\n    // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏´‡∏≤‡∏Å string ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JSON ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\n    console.error(\"Error parsing input JSON string:\", error);\n    // ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ error ‡∏´‡∏£‡∏∑‡∏≠ null ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ\n    parsedJsonData = { error: \"Invalid JSON string\", original_input: inputString };\n  }\n} else {\n  // ‡∏´‡∏≤‡∏Å inputString ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà string ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤\n  console.warn(\"Input is not a valid string or is empty.\");\n  parsedJsonData = { warning: \"No valid JSON string input\", original_input: inputString };\n}\n\n// ‡∏™‡πà‡∏á JSON Object ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ parse ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ\nreturn [{\n  json: parsedJsonData\n}];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-784,384],"id":"41803d5d-5e77-4b82-bec6-ba8a33033f7a","name":"Restructure Agent output"},{"parameters":{"inputSource":"passthrough"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-1440,384],"id":"337d475b-7cec-4b86-be73-2f400f971bf1","name":"When Executed by Another Workflow"},{"parameters":{"chatId":"8184052957","text":"=‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏á‡∏±‡∏ö‡∏ö‡∏ö","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[208,384],"id":"09cd241f-3797-442c-b0f0-a85d995b177a","name":"Inform the user1","webhookId":"b64a0881-7bd4-42e7-978b-682b6374745e","credentials":{"telegramApi":{"id":"lK02YtuNudQss08S","name":"Telegram account"}}},{"parameters":{"promptType":"define","text":"={{ $('Restructure Agent output').item.json.task_name }}","options":{"systemMessage":"=üßæ Who you are and your role\nYou are a helpful and precise AI Agent, primarily responsible for translating user requests from Thai into a specific English format, including an appropriate tag.\n\nüéØ Your Mission and Output Format\nYour mission is to analyze incoming messages in Thai, identify the core task, assign the most relevant tag from a predefined list, and translate the task description into simple English.\n\nYou must return the output as a single string only, following this exact format:\nTranslated English Task Name\n\nüß† Rules and Key Considerations\nOutput must be a single string only. No other text, explanations, or JSON objects are allowed.\n\nNever return multiple outputs.\n\n\nTranslated English Task Name: Translate only the descriptive part of the task into simple English. Exclude any leading command words or phrases from the original Thai message (e.g., \"add task\", \"save task\", \"create task\", \"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô\", \"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô\", \"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô\")."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-320,384],"id":"ebf9cd01-b744-4ef3-921b-1011c8849962","name":"Translate"},{"parameters":{"chatId":"8184052957","text":"=‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö Progressive agent ‡πÉ‡∏´‡πâ‡∏á‡∏±‡∏ö ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÄ‡∏î‡∏∞‡∏ö‡∏≠‡∏Å‡∏ô‡∏∞‡∏∞","additionalFields":{"appendAttribution":false,"parse_mode":"HTML"}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-1280,384],"id":"44234161-5617-4c86-bb11-e12602a8dec2","name":"Inform the user","webhookId":"b64a0881-7bd4-42e7-978b-682b6374745e","credentials":{"telegramApi":{"id":"lK02YtuNudQss08S","name":"Telegram account"}}}],"connections":{"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0},{"node":"Translate","type":"ai_languageModel","index":0}]]},"Get Current date1":{"main":[[{"node":"Translate","type":"main","index":0}]]},"AI Agent1":{"main":[[{"node":"Restructure Agent output","type":"main","index":0}]]},"Restructure Agent output":{"main":[[{"node":"Get Current date1","type":"main","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Inform the user","type":"main","index":0}]]},"Add data to the last row(s) in Project Ticket":{"main":[[{"node":"Inform the user1","type":"main","index":0}]]},"Translate":{"main":[[{"node":"Add data to the last row(s) in Project Ticket","type":"main","index":0}]]},"Inform the user":{"main":[[{"node":"AI Agent1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"When Executed by Another Workflow":[{"json":{"update_id":121477215,"message":{"message_id":906,"from":{"id":8184052957,"is_bot":false,"first_name":"Cheetah","language_code":"en"},"chat":{"id":8184052957,"first_name":"Cheetah","type":"private"},"date":1753955605,"text":"‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó project NTL '‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö PS team ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤'"}}}]},"versionId":"a467afd2-7eb2-45b9-9ff8-79c9baf9503c","triggerCount":0,"tags":[],"shared":[{"updatedAt":"2025-11-04T05:36:44.135Z","createdAt":"2025-11-04T05:36:44.135Z","role":"workflow:owner","workflowId":"y2O53ZDruHZmodMs","projectId":"p4rUtUQmpiuYMcpU","project":{"updatedAt":"2025-11-01T17:18:40.170Z","createdAt":"2025-11-01T09:21:32.660Z","id":"p4rUtUQmpiuYMcpU","name":"cheetah mufasa <cheetah5900@windowslive.com>","type":"personal","icon":null,"description":null}}]}